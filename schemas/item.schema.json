{
  "$id": "https://gbv.github.io/jskos/item.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "JSKOS Item",
  "description": "named entities",
  "type": "object",
  "definitions": {
    "itemSet": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "type": "null"
          },
          {
            "$ref": "#"
          }
        ]
      }
    },
    "language-map": {
      "type": "object",
      "patternProperties": {
        "^([a-z]{1,8}(-[a-z0-9]{1,8})*-?|-)$": {
          "type": "string",
          "minLength": 1
        }
      },
      "additionalProperties": false
    },
    "language-map-of-lists": {
      "type": "object",
      "patternProperties": {
        "^([a-z]{1,8}(-[a-z0-9]{1,8})*-?|-)$": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 1
          }
        }
      },
      "additionalProperties": false
    },
    "location": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "Point",
            "MultiPoint",
            "LineString",
            "MultiLineString",
            "Polygon",
            "MultiPolygon"
          ]
        }
      },
      "required": [
        "type"
      ],
      "additionalProperties": true
    },
    "address": {
      "type": "object",
      "properties": {
        "street":   { "type": "string" },
        "ext":      { "type": "string" },
        "pobox":    { "type": "string" },
        "locality": { "type": "string" },
        "region":   { "type": "string" },
        "code":     { "type": "string" },
        "country":  { "type": "string" }
      },
      "additionalProperties": false
    },
    "media": {
      "description": "Media based on IIIF Manifest Data Model",
      "type": "object",
      "properties": {
        "type": {
          "const": "Manifest"
        },
        "items": {
          "type": "array"
        }
      },
      "additionalProperties": true,
      "required": [
        "type",
        "items"
      ]
    },
    "edtf": {
      "$comment": "EDTF Level 1",
      "anyOf": [
        {
          "type": "string",
          "pattern": "^Y?-?[0-9X]{4,}[?~%]?(-[012X][0-9X][?~%]?(-[0-3X][0-9X][?~%]?)?)?$",
          "$comment": "EDTF Year, Year-Month, Year-Month-Day"
        },
        {
          "type": "string",
          "pattern": "^Y?-?[0-9X?~%-]{4,}T[0-9?~%:.]+(Z|[+-][0-9?~%:]+)?$",
          "$comment": "EDTF Date and Time"
        },
        {
          "type": "string",
          "pattern": "^(|\\.\\.|[0-9TXYZ%~?.+-]+)/(|\\.\\.|[0-9TXYZ%~?.+-]+)$",
          "$comment": "EDTF Interval (very lax)"
        }
      ]
    }
  },
  "allOf": [
    {
      "$ref": "resource.schema.json"
    }
  ],
  "properties": {
    "url": {
      "description": "URL of a page with information about the item",
      "$ref": "resource.schema.json#/definitions/url"
    },
    "notation": {
      "description": "list of notations",
      "$ref": "resource.schema.json#/definitions/list"
    },
    "prefLabel": {
      "description": "preferred labels, index by language",
      "$ref": "#/definitions/language-map"
    },
    "altLabel": {
      "description": "alternative labels, indexed by language",
      "$ref": "#/definitions/language-map-of-lists"
    },
    "hiddenLabel": {
      "description": "hidden labels, indexed by language",
      "$ref": "#/definitions/language-map-of-lists"
    },
    "scopeNote": {
      "description": "see SKOS Documentary Notes",
      "$ref": "#/definitions/language-map-of-lists"
    },
    "definition": {
      "description": "see SKOS Documentary Notes",
      "$ref": "#/definitions/language-map-of-lists"
    },
    "example": {
      "description": "see SKOS Documentary Notes",
      "$ref": "#/definitions/language-map-of-lists"
    },
    "historyNote": {
      "description": "see SKOS Documentary Notes",
      "$ref": "#/definitions/language-map-of-lists"
    },
    "editorialNote": {
      "description": "see SKOS Documentary Notes",
      "$ref": "#/definitions/language-map-of-lists"
    },
    "changeNote": {
      "description": "see SKOS Documentary Notes",
      "$ref": "#/definitions/language-map-of-lists"
    },
    "note": {
      "description": "see SKOS Documentary Notes",
      "$ref": "#/definitions/language-map-of-lists"
    },
    "startDate": {
      "description": "date of birth, creation, or estabishment of the item",
      "$ref": "#/definitions/edtf"
    },
    "endDate": {
      "description": "date death or resolution of the item",
      "$ref": "#/definitions/edtf"
    },
    "relatedDate": {
      "description": "other date somehow related to the item (deprecated, use relatedDates instead)",
      "$ref": "#/definitions/edtf"
    },
    "relatedDates": {
      "description": "other date somehow related to the item (deprecated, use relatedDates instead)",
      "type": "array",
      "items": {
        "$ref": "#/definitions/edtf"
      }
    },
    "location": {
      "description": "geographic location of the item",
      "$ref": "#/definitions/location"
    },
    "startPlace": {
      "description": "where an item started (e.g. place of birth)",
      "$ref": "concept.schema.json#/definitions/conceptSet"
    },
    "endPlace": {
      "description": "where an item ended (e.g. place of death)",
      "$ref": "concept.schema.json#/definitions/conceptSet"
    },
    "place": {
      "description": "other relevant place(s) of the item",
      "$ref": "concept.schema.json#/definitions/conceptSet"
    },
    "address": {
      "description": "geographic location of the item",
      "$ref": "#/definitions/address"
    },
    "replacedBy": {
      "description": "Related items that supplant, displace, or supersede the described item",
      "$ref": "#/definitions/itemSet"
    },
    "subject": {
      "description": "what this item is about (e.g. topic)",
      "$ref": "concept.schema.json#/definitions/conceptSet"
    },
    "subjectOf": {
      "description": "resources about this item (e.g. documentation)",
      "$ref": "concept.schema.json#/definitions/conceptSet"
    },
    "source": {
      "description": "sources from which the described resource is derived",
      "$ref": "concept.schema.json#/definitions/conceptSet"
    },
    "depiction": {
      "description": "list of image URLs depicting the item",
      "type": "array",
      "items": {
        "anyOf": [
          {
            "type": "null"
          },
          {
            "$ref": "resource.schema.json#/definitions/url"
          }
        ]
      }
    },
    "media": {
      "description": "audiovisual or other digital content representing the item",
      "type": "array",
      "items": {
        "$ref": "#/definitions/media"
      }
    }
  }
}
